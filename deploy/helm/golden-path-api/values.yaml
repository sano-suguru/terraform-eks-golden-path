# Default values for golden-path-api.

replicaCount: 2

image:
  repository: ghcr.io/example/terraform-eks-golden-path
  pullPolicy: IfNotPresent
  tag: "latest"

imagePullSecrets: []
nameOverride: ""
fullnameOverride: ""

serviceAccount:
  create: true
  annotations: {}
  name: ""

podAnnotations:
  prometheus.io/scrape: "true"
  prometheus.io/port: "8080"
  prometheus.io/path: "/metrics"

# Pod Security Standards (PSS) - restricted level
podSecurityContext:
  runAsNonRoot: true
  runAsUser: 65534
  fsGroup: 65534
  seccompProfile:
    type: RuntimeDefault

# Container security context - PSS restricted level
securityContext:
  allowPrivilegeEscalation: false
  capabilities:
    drop:
      - ALL
  readOnlyRootFilesystem: true
  runAsNonRoot: true
  seccompProfile:
    type: RuntimeDefault

service:
  type: ClusterIP
  port: 80
  targetPort: 8080

ingress:
  enabled: true
  className: ""
  annotations: {}
  hosts:
    - host: ""
      paths:
        - path: /
          pathType: Prefix
  tls: []

resources:
  limits:
    cpu: 100m
    memory: 128Mi
  requests:
    cpu: 50m
    memory: 64Mi

livenessProbe:
  httpGet:
    path: /healthz
    port: http
  initialDelaySeconds: 5
  periodSeconds: 10

readinessProbe:
  httpGet:
    path: /readyz
    port: http
  initialDelaySeconds: 5
  periodSeconds: 5

autoscaling:
  enabled: false
  minReplicas: 2
  maxReplicas: 10
  targetCPUUtilizationPercentage: 80

# Namespace configuration
namespace:
  # Set to true to create namespace with PSS labels
  # Set to false if namespace already exists
  create: false
  podSecurityStandard:
    # enforce: Violations will cause pod rejection
    # Levels: privileged, baseline, restricted
    enforce: restricted
    # warn: Violations trigger warnings
    warn: restricted
    # audit: Violations are recorded in audit logs
    audit: restricted
    # Kubernetes version for PSS (e.g., "v1.31", "latest")
    version: latest

nodeSelector: {}

tolerations: []

affinity: {}

env: []

# ServiceMonitor for Prometheus Operator
serviceMonitor:
  enabled: false
  interval: 30s
  path: /metrics
